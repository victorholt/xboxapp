var app=app||{};app.utils=app.utils||{},function(){"use strict";app.utils.isValidGameEntry=function(a,b){if(a&&!_.isUndefined(a)&&_.isObject(a)){b=_.escape(b).trim();var c=_.find(a,function(a){return a.title.toLowerCase()==b.toLowerCase()?!0:void 0});if(""!==b&&!c)return!0}return!1},app.utils.canVote=function(a){(!a||_.isUndefined(a))&&(a=0);var b=new Date,c=b.getFullYear()+"-"+b.getMonth()+"-"+b.getDate(),d=0!==a?new Date(a):new Date(1970,1,1),e=d.getFullYear()+"-"+d.getMonth()+"-"+d.getDate();return c==e?!1:0===b.getDay()||6===b.getDay()?!1:!0}}(),importScripts("//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js");var handleRequest=function(a){self.postMessage(a)};self.addEventListener("message",function(a){switch(a.data.request){case"addVote":case"checkKey":case"clearGames":case"getGames":case"setGotIt":a.data.apiUrl&&!_.isUndefined(a.data.apiUrl)&&importScripts(a.data.apiUrl);break;case"addGame":app.utils.isValidGameEntry(a.data.games,a.data.params.title)&&app.utils.canVote(a.data.lastVotedTime)?a.data.apiUrl&&!_.isUndefined(a.data.apiUrl)&&importScripts(a.data.apiUrl):self.postMessage(!1);break;default:self.postMessage(!1)}},!1);